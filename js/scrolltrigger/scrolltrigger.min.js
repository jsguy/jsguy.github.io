!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.ScrollTrigger=b()}(this,function(){"use strict";return function(a,b,c){function l(){var a=k.bindElement.scrollTop?k.bindElement.scrollTop:document.documentElement.scrollTop,b=k.bindElement.scrollLeft?k.bindElement.scrollLeft:document.documentElement.scrollLeft;g.left==b&&g.top==a||k.scrollDidChange(),e.length>0||f.length>0?(i=!0,h(l)):i=!1}function m(a,b){var c=b.split("("),d=c[0];if(c.length>1?(c=c[1].split(")")[0],c=c.indexOf("', '")>-1?c.split("', '"):c.indexOf("','")>-1?c.split("','"):c.indexOf('", "')>-1?c.split('", "'):c.indexOf('","')>-1?c.split('","'):[c]):c=[],c=c.map(function(a){return n(a)}),"function"==typeof k.callScope[d])try{k.callScope[d].apply(a.element,c)}catch(a){try{k.callScope[d].apply(null,c)}catch(a){}}}function n(a){return a+="",'"'==a[0]&&(a=a.substr(1)),"'"==a[0]&&(a=a.substr(1)),'"'==a[a.length-1]&&(a=a.substr(0,a.length-1)),"'"==a[a.length-1]&&(a=a.substr(0,a.length-1)),a}var d=function(a,b){this.element=b,this.defaultOptions=a,this.showCallback=null,this.hideCallback=null,this.visibleClass="visible",this.hiddenClass="invisible",this.addWidth=!1,this.addHeight=!1,this.once=!1;var c=0,d=0;this.left=function(a){return function(){return a.element.getBoundingClientRect().left}}(this),this.top=function(a){return function(){return a.element.getBoundingClientRect().top}}(this),this.xOffset=function(a){return function(b){var d=c;return a.addWidth&&!b?d+=a.width():b&&!a.addWidth&&(d-=a.width()),d}}(this),this.yOffset=function(a){return function(b){var c=d;return a.addHeight&&!b?c+=a.height():b&&!a.addHeight&&(c-=a.height()),c}}(this),this.width=function(a){return function(){return a.element.offsetWidth}}(this),this.height=function(a){return function(){return a.element.offsetHeight}}(this),this.reset=function(a){return function(){a.removeClass(a.visibleClass),a.removeClass(a.hiddenClass)}}(this),this.addClass=function(a){var b=function(b,c){a.element.classList.contains(b)||(a.element.classList.add(b),"function"==typeof c&&c())},c=function(b,c){b=b.trim();var d=new RegExp("(?:^|\\s)"+b+"(?:(\\s\\w)|$)","ig"),e=a.element.className;d.test(e)||(a.element.className+=" "+b,"function"==typeof c&&c())};return a.element.classList?b:c}(this),this.removeClass=function(a){var b=function(b,c){a.element.classList.contains(b)&&(a.element.classList.remove(b),"function"==typeof c&&c())},c=function(b,c){b=b.trim();var d=new RegExp("(?:^|\\s)"+b+"(?:(\\s\\w)|$)","ig"),e=a.element.className;d.test(e)&&(a.element.className=e.replace(d,"$1").trim(),"function"==typeof c&&c())};return a.element.classList?b:c}(this),this.init=function(a){return function(){var b=a.defaultOptions,e=a.element.getAttribute("data-scroll");b&&(b.toggle&&b.toggle.visible&&(a.visibleClass=b.toggle.visible),b.toggle&&b.toggle.hidden&&(a.hiddenClass=b.toggle.hidden),b.showCallback&&(a.showCallback=b.showCallback),b.hideCallback&&(a.hideCallback=b.hideCallback),b.centerHorizontal===!0&&(c=a.element.offsetWidth/2),b.centerVertical===!0&&(d=a.element.offsetHeight/2),b.offset&&b.offset.x&&(c+=b.offset.x),b.offset&&b.offset.y&&(d+=b.offset.y),b.addWidth&&(a.addWidth=b.addWidth),b.addHeight&&(a.addHeight=b.addHeight),b.once&&(a.once=b.once));var f=e.indexOf("addWidth")>-1,g=e.indexOf("addHeight")>-1,h=e.indexOf("once")>-1;a.addWidth===!1&&f===!0&&(a.addWidth=f),a.addHeight===!1&&g===!0&&(a.addHeight=g),a.once===!1&&h===!0&&(a.once=h),a.showCallback=a.element.hasAttribute("data-scroll-showCallback")?a.element.getAttribute("data-scroll-showCallback"):a.showCallback,a.hideCallback=a.element.hasAttribute("data-scroll-hideCallback")?a.element.getAttribute("data-scroll-hideCallback"):a.hideCallback;var i=e.split("toggle(");if(i.length>1){var j=i[1].split(")")[0].split(",");String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),a.visibleClass=j[0].trim().replace(".",""),a.hiddenClass=j[1].trim().replace(".","")}e.indexOf("centerHorizontal")>-1&&(c=a.element.offsetWidth/2),e.indexOf("centerVertical")>-1&&(d=a.element.offsetHeight/2);var k=e.split("offset(");if(k.length>1){var l=k[1].split(")")[0].split(",");c+=parseInt(l[0].replace("px","")),d+=parseInt(l[1].replace("px",""))}return a}}(this)};this.scrollElement=window,this.bindElement=document.body,this.callScope=window;var e=[],f=[],g={left:-1,top:-1},h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,1e3/60)},i=!1,j=function(a){return function(b,c,d){return void 0!=c&&null!=c?a.bindElement=c:a.bindElement=document.body,void 0!=d&&null!=d?a.scrollElement=d:a.scrollElement=window,a.bind(a.bindElement.querySelectorAll("[data-scroll]")),a}}(this);this.bind=function(b){return function(c){c instanceof HTMLElement&&(c=[c]);var f=[].slice.call(c);return f=f.map(function(b,c){var e=new d(a,b);return e.init()}),e=e.concat(f),e.length>0&&0==i?(i=!0,l()):i=!1,b}}(this),this.triggerFor=function(a){return function(a){var b=null;return e.each(function(c,d){c.element==a&&(b=c)}),b}}(this),this.destroy=function(a){return function(b){return e.each(function(a,c){a.element==b&&e.splice(c,1)}),a}}(this),this.destroyAll=function(a){return function(){return e=[],a}}(this),this.reset=function(a){return function(b){var c=a.triggerFor(b);if(null!=c){c.reset();var d=e.indexOf(c);d>-1&&e.splice(d,1)}return a}}(this),this.resetAll=function(a){return function(){return e.each(function(a,b){a.reset()}),e=[],a}}(this),this.attach=function(a){return function(b){return f.push(b),i||(i=!0,l()),a}}(this),this.detach=function(a){return function(b){var c=f.indexOf(b);return c>-1&&f.splice(c,1),a}}(this);var k=this;return this.scrollDidChange=function(a){return function(){var b=a.scrollElement.innerWidth||a.scrollElement.offsetWidth,c=a.scrollElement.innerHeight||a.scrollElement.offsetHeight,d=a.bindElement.scrollTop?a.bindElement.scrollTop:document.documentElement.scrollTop,h=a.bindElement.scrollLeft?a.bindElement.scrollLeft:document.documentElement.scrollLeft,i=[];e.each(function(a,e){var f=a.left(),j=a.top();g.left>h?f-=a.xOffset(!0):g.left<h&&(f+=a.xOffset(!1)),g.top>d?j-=a.yOffset(!0):g.top<d&&(j+=a.yOffset(!1)),f<b&&f>=0&&j<c&&j>=0?(a.addClass(a.visibleClass,function(){a.showCallback&&m(a,a.showCallback)}),a.removeClass(a.hiddenClass),a.once&&i.push(a)):(a.addClass(a.hiddenClass),a.removeClass(a.visibleClass,function(){a.hideCallback&&m(a,a.hideCallback)}))}),f.each(function(e){e.call(a,h,d,b,c)}),i.each(function(a){var b=e.indexOf(a);b>-1&&e.splice(b,1)}),g.left=h,g.top=d}}(this),Array.prototype.each=function(a){for(var b=this.length,c=0;c<b;c++){var d=this[c];d&&a(d,c)}},j(a,b,c)}});
